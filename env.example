# ============================================
# FreeCAD API & Worker Configuration
# ============================================
# Copy this file to .env and customize values
# cp env.example .env

# ============================================
# MODE Configuration (REQUIRED)
# ============================================
# Set MODE=api to run API server only
# Set MODE=worker to run RQ worker only
# Set MODE=all to run both API and Worker in same container (RECOMMENDED for simple deployment)
# This is set when running docker run command, not in .env file
# Example: docker run -e MODE=all ... (runs both API and Worker)
# Example: docker run -e MODE=api ... (runs API only)
# Example: docker run -e MODE=worker ... (runs Worker only)

# ============================================
# API Configuration
# ============================================
API_HOST=0.0.0.0
API_PORT=8020
# For cloud deployment: Change localhost to your domain
# Example: https://api.yourdomain.com
API_BASE_URL=http://localhost:8020

# ============================================
# Worker Configuration
# ============================================
# Number of worker processes per container (default: 1)
# Set NUM_WORKERS=5 to run 5 workers in one container
# For production, recommend: 3-5 workers per container
NUM_WORKERS=1

# ============================================
# Redis Configuration
# ============================================
# Format: redis://host:port/db
# For cloud deployment: Change localhost to your Redis host/domain
# For external Redis: redis://redis.yourdomain.com:6379/0
# For Docker network: redis://redis:6379/0
# For local: redis://localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# Queue name for RQ jobs
QUEUE_NAME=freecad_jobs

# ============================================
# MQTT Broker Configuration
# ============================================
# Format: mqtt://host:port
# For cloud deployment: Change localhost to your MQTT host/domain
# For external MQTT: mqtt://mqtt.yourdomain.com:1883
# For Docker network: mqtt://mqtt:1883
# For local: mqtt://localhost:1883
MQTT_BROKER=mqtt://localhost:1883

# ============================================
# Storage Configuration
# ============================================
# Path where generated files will be stored
# This path will be mounted as volume in Docker
STORAGE_PATH=/app/storage

# ============================================
# Job Configuration
# ============================================
# Job timeout in seconds (default: 300 = 5 minutes)
JOB_TIMEOUT=300

# Result TTL in seconds (default: 43200 = 12 hours)
# How long to keep successful job results
RESULT_TTL=43200

# Failure TTL in seconds (default: 43200 = 12 hours)
# How long to keep failed job results
FAILURE_TTL=43200
